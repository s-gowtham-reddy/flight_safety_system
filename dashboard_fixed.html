<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Safety Dashboard - Fixed</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .green { color: #27ae60; }
        .yellow { color: #f39c12; }
        .red { color: #e74c3c; }
        .blue { color: #3498db; }
        
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        
        .chart-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }
        
        .alert-box {
            background: #d4edda;
            border-left: 5px solid #27ae60;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            color: #155724;
            font-weight: 500;
        }
        
        .flight-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .flight-table th {
            background: #3498db;
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }
        
        .flight-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #ecf0f1;
        }
        
        .flight-table tr:hover {
            background: #f8f9fa;
        }
        
        .risk-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.85em;
            display: inline-block;
        }
        
        .risk-low { background: #d4edda; color: #27ae60; }
        .risk-medium { background: #fff3cd; color: #f39c12; }
        .risk-high { background: #f8d7da; color: #e74c3c; }
        
        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚úàÔ∏è Flight Safety & Risk Analysis Dashboard</h1>
            <p>Real-time ML Model Results - Fixed Version</p>
        </div>

        <div class="alert-box">
            <strong>‚úÖ STATUS:</strong> All 4 models trained successfully. 
            Best Model: <strong>Gradient Boosting</strong> | Accuracy: <strong>97.2%</strong>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Best Accuracy</div>
                <div class="stat-value blue">97.2%</div>
                <p style="color:#7f8c8d;margin-top:10px">Gradient Boosting</p>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Flights</div>
                <div class="stat-value">5,000</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">High Risk</div>
                <div class="stat-value red">304</div>
                <p style="color:#7f8c8d;margin-top:10px">6.1%</p>
            </div>
            <div class="stat-card">
                <div class="stat-label">F1-Score / ROC-AUC</div>
                <div class="stat-value green">0.7143 / 0.9847</div>
            </div>
        </div>

        <div class="chart-grid">
            <div class="chart-container">
                <div class="chart-title">üìä Model Performance</div>
                <div id="modelChart"></div>
            </div>

            <div class="chart-container">
                <div class="chart-title">üéØ Risk Distribution</div>
                <div id="riskDist"></div>
            </div>

            <div class="chart-container">
                <div class="chart-title">üîç Top Risk Factors</div>
                <div id="featureChart"></div>
            </div>

            <div class="chart-container">
                <div class="chart-title">üìä Confusion Matrix</div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                    <div style="padding: 20px; text-align: center; border-radius: 10px; font-weight: bold; color: white; font-size: 1.1em; background: #27ae60;">
                        TN<br><strong>937</strong>
                    </div>
                    <div style="padding: 20px; text-align: center; border-radius: 10px; font-weight: bold; color: white; font-size: 1.1em; background: #e74c3c;">
                        FP<br><strong>2</strong>
                    </div>
                    <div style="padding: 20px; text-align: center; border-radius: 10px; font-weight: bold; color: white; font-size: 1.1em; background: #f39c12;">
                        FN<br><strong>26</strong>
                    </div>
                    <div style="padding: 20px; text-align: center; border-radius: 10px; font-weight: bold; color: white; font-size: 1.1em; background: #3498db;">
                        TP<br><strong>35</strong>
                    </div>
                </div>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-title">üõ´ Live Predictions (Test Set Sample)</div>
            <table class="flight-table">
                <thead>
                    <tr>
                        <th>Flight ID</th>
                        <th>Route</th>
                        <th>Risk %</th>
                        <th>Risk Level</th>
                        <th>Action</th>
                        <th>Actual Outcome</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td><strong>AI-1000</strong></td><td>Mumbai‚ÜíDelhi</td><td><strong>0.07%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>Safe</td></tr>
                    <tr><td><strong>AI-1001</strong></td><td>Delhi‚ÜíKolkata</td><td><strong>2.52%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>Safe</td></tr>
                    <tr><td><strong>AI-1002</strong></td><td>Chennai‚ÜíBangalore</td><td><strong>0.12%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>Safe</td></tr>
                    <tr><td><strong>AI-1003</strong></td><td>Hyderabad‚ÜíMumbai</td><td><strong>0.07%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>Safe</td></tr>
                    <tr><td><strong>AI-1004</strong></td><td>Bangalore‚ÜíChennai</td><td><strong>20.64%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>High Risk</td></tr>
                    <tr><td><strong>AI-1005</strong></td><td>Kolkata‚ÜíMumbai</td><td><strong>0.39%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>Safe</td></tr>
                    <tr><td><strong>AI-1006</strong></td><td>Delhi‚ÜíChennai</td><td><strong>0.13%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>Safe</td></tr>
                    <tr><td><strong>AI-1007</strong></td><td>Mumbai‚ÜíBangalore</td><td><strong>0.17%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>Safe</td></tr>
                    <tr><td><strong>AI-1008</strong></td><td>Chennai‚ÜíDelhi</td><td><strong>2.49%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>Safe</td></tr>
                    <tr><td><strong>AI-1009</strong></td><td>Pune‚ÜíDelhi</td><td><strong>0.08%</strong></td><td><span class='risk-badge risk-low'>LOW</span></td><td>Cleared</td><td>Safe</td></tr>
                </tbody>
            </table>
        </div>

        <div class="footer">
            <p><strong>Developed by:</strong> Syamala Gowtham Reddy</p>
            <p>Sathyabama Institute | B.E. Computer Science & Engineering (Data Science)</p>
        </div>
    </div>

    <script>
        // Model Performance Chart
        var modelData = {
            x: ['Logistic Regression', 'Random Forest', 'Gradient Boosting', 'Ensemble'],
            y: [86.8, 95.4, 97.2, 96.9],
            type: 'bar',
            marker: {color: '#3498db'},
            text: ['86.8%', '95.4%', '97.2%', '96.9%'],
            textposition: 'outside'
        };
        
        Plotly.newPlot('modelChart', [modelData], {
            title: {},
            xaxis: {title: 'Model'},
            yaxis: {title: 'Accuracy (%)', range: [0, 105]},
            plot_bgcolor: '#f8f9fa',
            margin: {l: 60, r: 20, t: 30, b: 60}
        }, {responsive: true, displayModeBar: false});

        // Risk Distribution Pie Chart
        var riskData = {
            values: [4696, 304],
            labels: ['Safe Flights', 'High Risk Flights'],
            type: 'pie',
            marker: {colors: ['#27ae60', '#e74c3c']},
            textinfo: 'label+percent+value',
            hole: 0.4
        };
        
        Plotly.newPlot('riskDist', [riskData], {
            title: {},
            paper_bgcolor: 'white',
            margin: {l: 20, r: 20, t: 30, b: 20}
        }, {responsive: true, displayModeBar: false});

        // Top Risk Factors - Horizontal Bar Chart
        var featureData = {
            y: ['Destination_Weather_Severity', 'Departure_Weather_Severity', 'Days_Since_Maintenance', 'Wind_Speed_kmh', 'Pilot_Experience_Hours', 'Aircraft_Age_Years', 'Route_Complexity', 'Passenger_Count', 'Cargo_Weight_tons', 'Flight_Distance_km'],
            x: [21.24, 17.59, 12.02, 11.92, 6.34, 6.02, 4.76, 4.08, 3.9, 3.69],
            type: 'bar',
            orientation: 'h',
            marker: {
                color: [21.24, 17.59, 12.02, 11.92, 6.34, 6.02, 4.76, 4.08, 3.9, 3.69],
                colorscale: 'Reds',
                showscale: false
            },
            text: ['21.24%', '17.59%', '12.02%', '11.92%', '6.34%', '6.02%', '4.76%', '4.08%', '3.9%', '3.69%'],
            textposition: 'outside'
        };
        
        Plotly.newPlot('featureChart', [featureData], {
            title: {},
            xaxis: {title: 'Impact (%)'},
            yaxis: {title: ''},
            plot_bgcolor: '#f8f9fa',
            margin: {l: 200, r: 80, t: 30, b: 50}
        }, {responsive: true, displayModeBar: false});
    </script>
</body>
</html>
